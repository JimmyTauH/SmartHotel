{"ast":null,"code":"export default {\n  name: \"ServiceApplication\",\n  data() {\n    return {\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\n      form: {\n        serviceType: '',\n        serviceTime: '',\n        remarks: ''\n      },\n      services: [],\n      // 存储已申请的服务\n      rules: {\n        serviceType: [{\n          required: true,\n          message: '请输入服务类型',\n          trigger: 'blur'\n        }],\n        serviceTime: [{\n          required: true,\n          message: '请选择预约时间',\n          trigger: 'change'\n        }]\n      }\n    };\n  },\n  mounted() {\n    this.loadServices();\n  },\n  computed: {\n    isFormDisabled() {\n      return this.services.length >= 5; // 假设限制最多申请5个服务\n    }\n  },\n  methods: {\n    loadServices() {\n      this.$request.get('/service/listByUserId/' + this.user.id).then(res => {\n        this.services = res.data || [];\n      });\n    },\n    submitRequest() {\n      this.$refs.formRef.validate().then(() => {\n        this.form.userId = this.user.id;\n        this.$request.post('/service/apply', this.form).then(res => {\n          if (res.code === '200') {\n            this.$message.success('申请成功');\n            this.loadServices(); // 重新加载服务列表\n            this.form = {\n              serviceType: '',\n              serviceTime: '',\n              remarks: ''\n            }; // 重置表单\n          } else {\n            this.$message.error(res.msg);\n          }\n        });\n      }).catch(err => {\n        console.log('err', err);\n      });\n    },\n    deleteService(serviceId) {\n      this.$confirm('您确定删除该服务申请吗？', '确认删除', {\n        type: 'warning'\n      }).then(() => {\n        this.$request.delete('/service/delete/' + serviceId).then(res => {\n          if (res.code === '200') {\n            this.$message.success('删除成功');\n            this.loadServices(); // 重新加载服务列表\n          } else {\n            this.$message.error(res.msg);\n          }\n        });\n      }).catch(err => {\n        console.log('err', err);\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","user","JSON","parse","localStorage","getItem","form","serviceType","serviceTime","remarks","services","rules","required","message","trigger","mounted","loadServices","computed","isFormDisabled","length","methods","$request","get","id","then","res","submitRequest","$refs","formRef","validate","userId","post","code","$message","success","error","msg","catch","err","console","log","deleteService","serviceId","$confirm","type","delete"],"sources":["src/views/front/ServiceBooking.vue"],"sourcesContent":["<template>\n  <div class=\"main-content\" style=\"width: 50%\">\n    <div class=\"card\" style=\"font-weight: bold;font-size: 28px;display: flex\">\n      酒店服务申请\n    </div>\n    <div class=\"card\" style=\"margin-top: 10px\">\n      <div style=\"font-weight: bold;font-size: 28px;display: flex\">\n      已申请服务\n    </div>\n      <el-table :data=\"services\" style=\"width: 100%\">\n        <el-table-column prop=\"serviceType\" label=\"服务类型\"></el-table-column>\n        <el-table-column prop=\"serviceTime\" label=\"预约时间\"></el-table-column>\n        <el-table-column prop=\"remarks\" label=\"备注\"></el-table-column>\n        <el-table-column label=\"操作\">\n          <template v-slot=\"scope\">\n            <el-button @click=\"deleteService(scope.row.id)\" type=\"text\" style=\"color: #ff2050\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n      <el-form :model=\"form\" ref=\"formRef\" label-width=\"200px\" label-align=\"right\" :rules=\"rules\" style=\"margin-top: 20px\">\n        <el-form-item label=\"预约服务类型\" prop=\"serviceType\" required>\n          <el-input v-model=\"form.serviceType\" placeholder=\"请输入服务类型\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"预约服务时间\" prop=\"serviceTime\" required>\n          <el-date-picker v-model=\"form.serviceTime\" type=\"datetime\" placeholder=\"选择预约时间\"></el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"备注\" prop=\"remarks\">\n          <el-input type=\"textarea\" v-model=\"form.remarks\" placeholder=\"请输入备注\"></el-input>\n        </el-form-item>\n        <div style=\"margin-bottom: 20rpx;margin-left: 200px;\">\n          <el-button style=\"background-color: #006eff\" :disabled=\"isFormDisabled\" class=\"my-button-primary\"\n                     type=\"primary\" @click=\"submitRequest\">\n            提交申请\n          </el-button>\n        </div>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"ServiceApplication\",\n  data() {\n    return {\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\n      form: {\n        serviceType: '',\n        serviceTime: '',\n        remarks: ''\n      },\n      services: [], // 存储已申请的服务\n      rules: {\n        serviceType: [\n          { required: true, message: '请输入服务类型', trigger: 'blur' }\n        ],\n        serviceTime: [\n          { required: true, message: '请选择预约时间', trigger: 'change' }\n        ],\n      }\n    }\n  },\n  mounted() {\n    this.loadServices();\n  },\n  computed: {\n    isFormDisabled() {\n      return this.services.length >= 5; // 假设限制最多申请5个服务\n    },\n  },\n  methods: {\n    loadServices() {\n      this.$request.get('/service/listByUserId/' + this.user.id).then(res => {\n        this.services = res.data || [];\n      });\n    },\n    submitRequest() {\n      this.$refs.formRef.validate().then(() => {\n        this.form.userId = this.user.id;\n        this.$request.post('/service/apply', this.form).then(res => {\n          if (res.code === '200') {\n            this.$message.success('申请成功');\n            this.loadServices(); // 重新加载服务列表\n            this.form = { serviceType: '', serviceTime: '', remarks: '' }; // 重置表单\n          } else {\n            this.$message.error(res.msg);\n          }\n        });\n      }).catch(err => {\n        console.log('err', err);\n      });\n    },\n    deleteService(serviceId) {\n      this.$confirm('您确定删除该服务申请吗？', '确认删除', { type: 'warning' }).then(() => {\n        this.$request.delete('/service/delete/' + serviceId).then(res => {\n          if (res.code === '200') {\n            this.$message.success('删除成功');\n            this.loadServices(); // 重新加载服务列表\n          } else {\n            this.$message.error(res.msg);\n          }\n        });\n      }).catch(err => {\n        console.log('err', err);\n      });\n    }\n  }\n}\n</script>\n\n<style scoped>\n.my-button-primary {\n  background-color: #006eff !important;\n  height: 70rpx;\n  line-height: 70rpx;\n  font-size: 28rpx;\n}\n</style>"],"mappings":"AA0CA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,IAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;MACAC,IAAA;QACAC,WAAA;QACAC,WAAA;QACAC,OAAA;MACA;MACAC,QAAA;MAAA;MACAC,KAAA;QACAJ,WAAA,GACA;UAAAK,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAN,WAAA,GACA;UAAAI,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MAEA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,YAAA;EACA;EACAC,QAAA;IACAC,eAAA;MACA,YAAAR,QAAA,CAAAS,MAAA;IACA;EACA;EACAC,OAAA;IACAJ,aAAA;MACA,KAAAK,QAAA,CAAAC,GAAA,iCAAArB,IAAA,CAAAsB,EAAA,EAAAC,IAAA,CAAAC,GAAA;QACA,KAAAf,QAAA,GAAAe,GAAA,CAAAzB,IAAA;MACA;IACA;IACA0B,cAAA;MACA,KAAAC,KAAA,CAAAC,OAAA,CAAAC,QAAA,GAAAL,IAAA;QACA,KAAAlB,IAAA,CAAAwB,MAAA,QAAA7B,IAAA,CAAAsB,EAAA;QACA,KAAAF,QAAA,CAAAU,IAAA,wBAAAzB,IAAA,EAAAkB,IAAA,CAAAC,GAAA;UACA,IAAAA,GAAA,CAAAO,IAAA;YACA,KAAAC,QAAA,CAAAC,OAAA;YACA,KAAAlB,YAAA;YACA,KAAAV,IAAA;cAAAC,WAAA;cAAAC,WAAA;cAAAC,OAAA;YAAA;UACA;YACA,KAAAwB,QAAA,CAAAE,KAAA,CAAAV,GAAA,CAAAW,GAAA;UACA;QACA;MACA,GAAAC,KAAA,CAAAC,GAAA;QACAC,OAAA,CAAAC,GAAA,QAAAF,GAAA;MACA;IACA;IACAG,cAAAC,SAAA;MACA,KAAAC,QAAA;QAAAC,IAAA;MAAA,GAAApB,IAAA;QACA,KAAAH,QAAA,CAAAwB,MAAA,sBAAAH,SAAA,EAAAlB,IAAA,CAAAC,GAAA;UACA,IAAAA,GAAA,CAAAO,IAAA;YACA,KAAAC,QAAA,CAAAC,OAAA;YACA,KAAAlB,YAAA;UACA;YACA,KAAAiB,QAAA,CAAAE,KAAA,CAAAV,GAAA,CAAAW,GAAA;UACA;QACA;MACA,GAAAC,KAAA,CAAAC,GAAA;QACAC,OAAA,CAAAC,GAAA,QAAAF,GAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}