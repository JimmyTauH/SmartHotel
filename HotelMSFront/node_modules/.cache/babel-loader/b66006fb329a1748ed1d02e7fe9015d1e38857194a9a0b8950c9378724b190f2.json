{"ast":null,"code":"export default {\n  name: \"ServiceBook\",\n  data() {\n    return {\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\n      form: {\n        title: '',\n        time: '',\n        content: ''\n      },\n      services: [],\n      // 存储已申请的服务\n      serviceOptions: [{\n        label: '房间清洁',\n        value: 'cleaning'\n      }, {\n        label: '早餐服务',\n        value: 'breakfast'\n      }, {\n        label: '接送服务',\n        value: 'transportation'\n      }\n      // 其他服务类型\n      ],\n      rules: {\n        title: [{\n          required: true,\n          message: '请选择服务类型',\n          trigger: 'change'\n        }],\n        time: [{\n          required: true,\n          message: '请选择预约时间',\n          trigger: 'change'\n        }]\n      }\n    };\n  },\n  mounted() {\n    this.loadServices();\n  },\n  computed: {\n    isFormDisabled() {\n      return this.services.length >= 5; // 假设限制最多申请5个服务\n    }\n  },\n  methods: {\n    loadServices() {\n      this.$request.get('/serviceBook/selectAll/').then(res => {\n        this.services = res.data || [];\n      });\n    },\n    submitRequest() {\n      this.$refs.formRef.validate().then(() => {\n        this.form.user = this.user.id;\n        this.$request.post('/serviceBook/add/', this.form).then(res => {\n          if (res.code === '200') {\n            this.$message.success('申请成功');\n            this.loadServices(); // 重新加载服务列表\n            this.form = {\n              title: '',\n              time: '',\n              content: ''\n            }; // 重置表单\n          } else {\n            this.$message.error(res.msg);\n          }\n        });\n      }).catch(err => {\n        console.log('err', err);\n      });\n    },\n    deleteService(serviceId) {\n      this.$confirm('您确定删除该服务申请吗？', '确认删除', {\n        type: 'warning'\n      }).then(() => {\n        this.$request.delete('/serviceBook/delete' + serviceId).then(res => {\n          if (res.code === '200') {\n            this.$message.success('删除成功');\n            this.loadServices(); // 重新加载服务列表\n          } else {\n            this.$message.error(res.msg);\n          }\n        });\n      }).catch(err => {\n        console.log('err', err);\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","user","JSON","parse","localStorage","getItem","form","title","time","content","services","serviceOptions","label","value","rules","required","message","trigger","mounted","loadServices","computed","isFormDisabled","length","methods","$request","get","then","res","submitRequest","$refs","formRef","validate","id","post","code","$message","success","error","msg","catch","err","console","log","deleteService","serviceId","$confirm","type","delete"],"sources":["src/views/front/ServiceBooking.vue"],"sourcesContent":["<template>\n  <div class=\"main-content\" style=\"width: 50%\">\n    <div class=\"card\" style=\"font-weight: bold;font-size: 28px;display: flex\">\n      酒店服务申请\n    </div>\n    <div class=\"card\" style=\"margin-top: 10px\">\n      <div style=\"font-size: 28px;display: flex\">\n      已申请服务\n      </div>\n      <el-table :data=\"services\" style=\"width: 100%\">\n        <el-table-column prop=\"title\" label=\"服务类型\"></el-table-column>\n        <el-table-column prop=\"time\" label=\"预约时间\"></el-table-column>\n        <el-table-column prop=\"content\" label=\"备注\"></el-table-column>\n        <!-- <el-table-column label=\"操作\">\n          <template v-slot=\"scope\">\n            <el-button @click=\"deleteService(scope.row.id)\" type=\"text\" style=\"color: #ff2050\">删除</el-button>\n          </template>\n        </el-table-column> -->\n      </el-table>\n\n      <div style=\"font-size: 28px;display: flex\">\n      申请服务\n      </div>\n      <el-form :model=\"form\" ref=\"formRef\" label-width=\"200px\" label-align=\"right\" :rules=\"rules\" style=\"margin-top: 20px\">\n        <el-form-item label=\"预约服务类型\" prop=\"title\" required>\n          <el-select v-model=\"form.title\" placeholder=\"选择服务类型\">\n          <el-option\n            v-for=\"option in serviceOptions\"\n            :key=\"option.value\"\n            :label=\"option.label\"\n            :value=\"option.value\"\n          ></el-option>\n        </el-select>\n        </el-form-item>\n\n        <el-form-item label=\"预约服务时间\" prop=\"time\" required>\n          <el-date-picker v-model=\"form.time\" type=\"datetime\" placeholder=\"选择预约时间\"></el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"备注\" prop=\"content\">\n          <el-input type=\"textarea\" v-model=\"form.content\" placeholder=\"请输入备注\"></el-input>\n        </el-form-item>\n        <div style=\"margin-bottom: 20rpx;margin-left: 200px;\">\n          <el-button style=\"background-color: #006eff\" :disabled=\"isFormDisabled\" class=\"my-button-primary\"\n                     type=\"primary\" @click=\"submitRequest\">\n            提交申请\n          </el-button>\n        </div>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"ServiceBook\",\n  data() {\n    return {\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\n      form: {\n        title: '',\n        time: '',\n        content: ''\n      },\n      services: [], // 存储已申请的服务\n      serviceOptions: [\n        { label: '房间清洁', value: 'cleaning' },\n        { label: '早餐服务', value: 'breakfast' },\n        { label: '接送服务', value: 'transportation' },\n        // 其他服务类型\n      ],\n      rules: {\n        title: [\n          { required: true, message: '请选择服务类型', trigger: 'change' }\n        ],\n        time: [\n          { required: true, message: '请选择预约时间', trigger: 'change' }\n        ],\n      }\n    }\n  },\n  mounted() {\n    this.loadServices();\n  },\n  computed: {\n    isFormDisabled() {\n      return this.services.length >= 5; // 假设限制最多申请5个服务\n    },\n  },\n  methods: {\n    loadServices() {\n      this.$request.get('/serviceBook/selectAll/').then(res => {\n        this.services = res.data || [];\n      });\n    },\n    submitRequest() {\n      this.$refs.formRef.validate().then(() => {\n        this.form.user = this.user.id;\n        this.$request.post('/serviceBook/add/', this.form).then(res => {\n          if (res.code === '200') {\n            this.$message.success('申请成功');\n            this.loadServices(); // 重新加载服务列表\n            this.form = { title: '', time: '', content: '' }; // 重置表单\n          } else {\n            this.$message.error(res.msg);\n          }\n        });\n      }).catch(err => {\n        console.log('err', err);\n      });\n    },\n    deleteService(serviceId) {\n      this.$confirm('您确定删除该服务申请吗？', '确认删除', { type: 'warning' }).then(() => {\n        this.$request.delete('/serviceBook/delete' + serviceId).then(res => {\n          if (res.code === '200') {\n            this.$message.success('删除成功');\n            this.loadServices(); // 重新加载服务列表\n          } else {\n            this.$message.error(res.msg);\n          }\n        });\n      }).catch(err => {\n        console.log('err', err);\n      });\n    }\n  }\n}\n</script>\n\n<style scoped>\n.my-button-primary {\n  background-color: #006eff !important;\n  height: 70rpx;\n  line-height: 70rpx;\n  font-size: 28rpx;\n}\n</style>"],"mappings":"AAqDA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,IAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;MACAC,IAAA;QACAC,KAAA;QACAC,IAAA;QACAC,OAAA;MACA;MACAC,QAAA;MAAA;MACAC,cAAA,GACA;QAAAC,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,KAAA;MAAA;MACA;MAAA,CACA;MACAC,KAAA;QACAP,KAAA,GACA;UAAAQ,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAT,IAAA,GACA;UAAAO,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MAEA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,YAAA;EACA;EACAC,QAAA;IACAC,eAAA;MACA,YAAAX,QAAA,CAAAY,MAAA;IACA;EACA;EACAC,OAAA;IACAJ,aAAA;MACA,KAAAK,QAAA,CAAAC,GAAA,4BAAAC,IAAA,CAAAC,GAAA;QACA,KAAAjB,QAAA,GAAAiB,GAAA,CAAA3B,IAAA;MACA;IACA;IACA4B,cAAA;MACA,KAAAC,KAAA,CAAAC,OAAA,CAAAC,QAAA,GAAAL,IAAA;QACA,KAAApB,IAAA,CAAAL,IAAA,QAAAA,IAAA,CAAA+B,EAAA;QACA,KAAAR,QAAA,CAAAS,IAAA,2BAAA3B,IAAA,EAAAoB,IAAA,CAAAC,GAAA;UACA,IAAAA,GAAA,CAAAO,IAAA;YACA,KAAAC,QAAA,CAAAC,OAAA;YACA,KAAAjB,YAAA;YACA,KAAAb,IAAA;cAAAC,KAAA;cAAAC,IAAA;cAAAC,OAAA;YAAA;UACA;YACA,KAAA0B,QAAA,CAAAE,KAAA,CAAAV,GAAA,CAAAW,GAAA;UACA;QACA;MACA,GAAAC,KAAA,CAAAC,GAAA;QACAC,OAAA,CAAAC,GAAA,QAAAF,GAAA;MACA;IACA;IACAG,cAAAC,SAAA;MACA,KAAAC,QAAA;QAAAC,IAAA;MAAA,GAAApB,IAAA;QACA,KAAAF,QAAA,CAAAuB,MAAA,yBAAAH,SAAA,EAAAlB,IAAA,CAAAC,GAAA;UACA,IAAAA,GAAA,CAAAO,IAAA;YACA,KAAAC,QAAA,CAAAC,OAAA;YACA,KAAAjB,YAAA;UACA;YACA,KAAAgB,QAAA,CAAAE,KAAA,CAAAV,GAAA,CAAAW,GAAA;UACA;QACA;MACA,GAAAC,KAAA,CAAAC,GAAA;QACAC,OAAA,CAAAC,GAAA,QAAAF,GAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}